<!DOCTYPE html>
<html>
<head><title>Open Factory</title>
  <link rel="icon" href="/images/icon.png">
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body style="background-color:#111111">
<h1 style="text-align: center; color:white">Open Factory</h1>
<p style="text-align: center; color:white">Laboratorio di Lorenzo Ubaldi</p>
<!-- Top navigation -->
<div class="topnav">
  <!-- Centered link -->
  <div class="topnav-centered">
    <a href="index.html">Home</a>
  </div>
  <!-- Left-aligned links (default) -->
  <a href="attrezzature.html">Attrezzature</a>
  <a href="foto.html">Foto</a>
  <!-- Right-aligned links -->
  <div class="topnav-right">
    <a href="contatti.html">Contatti</a>
    <a class="active">Tools</a>
  </div>
</div>
<div class="centered">
<h1 style="text-align: center; color:white">Random Number Generator</h1>
  <p style="text-align: center; color:white">Click the button below to generate a random number between 1 and 100:</p>

  <button onclick="generateNumber()" class="button">Generate Number</button>
  <h>&nbsp;&nbsp;&nbsp;</h>
  <h id="number" style="text-align: center; color:white">00</h>
</div>
  <script>
    // Generate a random number between 1 and 100
    function generateNumber() {
      var number = Math.floor(Math.random() * 100) + 1;
      document.getElementById("number").innerHTML = number;
    }
  </script>
  <br>
<hr>

<div class="centered">
<h1 style="text-align: center; color:white">QR Code Generator</h1>
  <p  class="simpletext">Insert a link and then click on the button to generate a QR code.</p>
<!-- Include the qrcode.js library -->
<script src="https://unpkg.com/qrcodejs@1.0.0/qrcode.min.js"></script>

<!-- Create a form with an input for the link and a button to generate the QR code -->
<form>
  <label class="simpletext">
    Link:
    <h>&nbsp;&nbsp;&nbsp;</h>
    <input type="text" id="link-input" class="textbox"/>
  </label>
  <h>&nbsp;&nbsp;&nbsp;</h>
  <button type="button" id="generate-button" class="button">Generate QR code</button>
</form>
</div>
<!-- Create a div element where the QR code will be generated -->
<div id="qrcode" class="centered"></div>

<!-- Generate the QR code and insert it into the div element when the button is clicked -->
<script>
  var generateButton = document.getElementById("generate-button");

  generateButton.addEventListener("click", function () {
    // Get the link from the input
    var link = document.getElementById("link-input").value;

    // Remove the existing QR code
    var qrcodeElement = document.getElementById("qrcode");
    while (qrcodeElement.firstChild) {
      qrcodeElement.removeChild(qrcodeElement.firstChild);
    }

    // Generate the QR code
    var qrcode = new QRCode(qrcodeElement, {
      text: link,
      width: 200,
      height: 200,
    });
    // Reset the input
    linkInput.value = "";
  });
</script>
<br>
<hr>

<div class="centeredwhite">
<h1 style="text-align: center; color:white">Weather in Milan</h1>
<!-- Create a div element where the weather data will be displayed -->
<div id="weather" class="simpletext"></div>

<!-- Get the weather data and display it in the div element when the page loads -->
<script>
  // Set the API URL and your API key
  var url = "https://api.openweathermap.org/data/2.5/weather?q=Milan,Italy&appid=c90f2f8ecb0d97f5a6a19d6ca9e5e636";

  // Send a GET request to the API to retrieve the weather data
  fetch(url)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      // Parse the weather data and display it in the div element
      var weather = data.weather[0];
      var temperature = (data.main.temp - 273.15).toFixed(2);
      var pressure = data.main.pressure;
      var humidity = data.main.humidity;
      var weatherString = "Current weather in Milan, Italy: " + weather.main + " - " + weather.description + "<br>" + temperature + "Â°C, " + pressure + " hPa, " + humidity + "% humidity";
      var weatherElement = document.getElementById("weather");
      weatherElement.innerHTML = weatherString;
    });
</script>
<br>
<hr>

  <h1>Stopwatch</h1>
  <p class="simpletext">Time: <span id="time-minute">0</span>:<span id="time-seconds">0</span>:<span id="time-milliseconds">0</span></p>
  <button class="button" id="start">Start</button>
  <button class="button" id="stop">Stop</button>
  <button class="button" id="reset">Reset</button>

  <script>
    // Initialize variables
    let timeMinute = 0;
    let timeSecond = 0;
    let timeMillisecond = 0;
    let stopped = 1;
    let going = 0;

    // Get references to the buttons and the time display
    const startBtn = document.getElementById("start");
    const stopBtn = document.getElementById("stop");
    const resetBtn = document.getElementById("reset");
    const timeMinuteDisplay = document.getElementById("time-minute");
    const timeSecondDisplay = document.getElementById("time-seconds");
    const timeMillisecondDisplay = document.getElementById("time-milliseconds");
    
    // Define a function to start the stopwatch
    function start() {
      // Increment the time and update the time display
      stopped = 0;
      if(!going){
        going = 1;
        setTimeout(go, 1);
      }
    }
    
    function go() {
      timeMillisecond += 1;
      if(timeMillisecond == 100){
        timeSecond += 1;
        timeMillisecond = 0;
      }
      if(timeSecond == 60){
        timeMinute += 1;
        timeSecond = 0;
      }
      
      timeMinuteDisplay.innerHTML = timeMinute;
      timeSecondDisplay.innerHTML = timeSecond;
      timeMillisecondDisplay.innerHTML = timeMillisecond;
      
      if(!stopped){
        setTimeout(go, 1);
        }
    }

    // Define a function to stop the stopwatch
    function stop() {
      // Clear the interval to stop the stopwatch
      stopped = 1;
      going = 0;
      
      timeMinuteDisplay.innerHTML = timeMinute;
      timeSecondDisplay.innerHTML = timeSecond;
      timeMillisecondDisplay.innerHTML = timeMillisecond;
    }

    // Define a function to reset the stopwatch
    function reset() {
      // Clear the interval and reset the time to 0
      stopped = 1;
      timeMinute = 0;
      timeSecond = 0;
      timeMillisecond = 0;
      going = 0;
      
      timeMinuteDisplay.innerHTML = timeMinute;
      timeSecondDisplay.innerHTML = timeSecond;
      timeMillisecondDisplay.innerHTML = timeMillisecond;
    }

    // Add event listeners to the buttons to call the start, stop, and reset functions
    startBtn.addEventListener("click", start);
    stopBtn.addEventListener("click", stop);
    resetBtn.addEventListener("click", reset);
  </script>
</div>
<br>
<hr>

<div class="centered">
    <h1 class="simpletext">Timer</h1>
    <p class="simpletext">Enter the time in seconds:</p>
    <input type="number" value="10" id="time-input"  class="textbox" pattern="[1-9]*" min="1"/>
    <button onclick="startTimer()" class="button">Start Timer</button>
    <p class="simpletext">Time remaining: <span id="time-remaining">0</span></p>
    <audio id="audio-context"></audio>

    <script>
      function startTimer() {
        // Get the time from the input field
        var time = document.getElementById("time-input").value;
        var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        // Update the time remaining every second
         var oscillator = audioCtx.createOscillator();

  // Set the frequency of the oscillator (i.e. the note to play)
  oscillator.frequency.value = 600;

  // Connect the oscillator to the audio context
  oscillator.connect(audioCtx.destination);

  // Start the oscillator
  
        var timer = setInterval(function() {
          document.getElementById("time-remaining").innerHTML = time;
          time--;
          
          if (time == 0) {
            clearInterval(timer);
            setTimeout(function(){oscillator.start();}, 1000);
            
            setTimeout(function(){oscillator.stop();}, 1600);
            setTimeout(function(){document.getElementById("time-remaining").innerHTML = time;}, 1000);
            
          }
        }, 1000);
      }
    </script>
</div>


<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>

